# playwrightBase

## Step to install
```
npm ci
npx playwright install
```
## Vscode extensions
- ESLint
- Prettier
- Git Blame
- json
- playwright Test for VSCode



## How to run campaign

### Run campaign (located in `./src/tests` folder)
```bash
npm test 
npm run test:headed // headed mode
```

## How to run only one test:

### With playwright command line: 

```
npx playwright test -g "my marvelous test" --headed //with headed mode

npm  playwright test -g "my marvelous test" --headed --debug //debug mode
```

### With .only property:
Add .only property and run the campaign
```
test.only('Client can select 1 contract generated by SCDM and cancel it', async ({ ..
```

### Other scripts:
Check lint: 
```
npm run lint
```

Check typescript errors:
```
npm run type-check 
```

## Debug:
https://playwright.dev/docs/debug (most userfriendly options are --ui and --debug options)


## How to setup the slow motion
Uncomment the following lines in `./playwright.config.ts` file in order to add slowMo in your test execution.
The slowMo value is the delay between 2 playwright actions.

```javascript
    // launchOptions: {
    //     slowMo: 500,
    // },
```


## Rules

### Campaign structure

```bash
aws
    |--codebuild (pipeline configuration)
config
    |-- (configuration files with .env, slack.ts ...)
src
    |-- datas
    |-- enums
    |-- pom
        |-- (page and component object files)
    |-- steps
        |-- (reusable test.steps files)
    |-- tests
        |-- setup
                |-- (file related to login. Started before campaign as a depedency in playwright.config.ts)
        -- (test files with scenarios)
    |-- types
        |-- (types and enum)
    |-- utils    
        |-- (common tools library)
playwright.config.ts (global configuration)
global-setup.ts (executed before campaign execution)
global-teardown.ts (executed after campaign execution)
tsconfig.json
package.json
```


### Page object rules:

- Its name is explicit and you should know which page or component it concerns.
- Only contains locators of a page or component in readonly and private when not used in a test assertion.
- Only contains methods for interacting with the HTML page or component.
- Can be a component or an entire page.
- No assertions, the responsabilities are for the test file.

### Tests rules:
- Contains .spec.ts as extension.
- Name let you understand what it will be tested.
- Interacting methods are only provided by page object (mylocator.click() or mypage.locator.click() is forbidden, use mypage.click()).
- Use test.step to clarify the scenario steps.
- Test must be understable by everyone. Don't obfuscate your code.
- Test file and scenarios are independant.


### More about fixtures
Fixture are used to instanciate page object automatically in tests. The fixture file also export expect and test objects. So import test and expect from the GlobalFixture.ts file rathen than the playwright library.

### Ressources 
https://playwright.dev/ (official documentation)

https://github.com/mistertemp/shared-libs-qa (QA shared libraries)

https://www.selenium.dev/documentation/test_practices/encouraged/page_object_models/

https://medium.com/geekculture/mastering-playwright-how-to-create-effective-page-objects-ecbc06786c95

https://www.guru99.com/page-object-model-pom-page-factory-in-selenium-ultimate-guide.html